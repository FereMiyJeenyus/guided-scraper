(this["webpackJsonpguided-scraper"]=this["webpackJsonpguided-scraper"]||[]).push([[0],{443:function(e,t,n){e.exports=n(881)},448:function(e,t,n){},451:function(e,t,n){},473:function(e,t){},475:function(e,t){},505:function(e,t){},506:function(e,t){},550:function(e,t){},552:function(e,t){},575:function(e,t){},688:function(e,t){},881:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(85),o=n.n(r),i=(n(448),n(247)),l=n(106),u=n.n(l),s=n(179),h=n(109),m=n(64),d=(n(450),n(897)),f=n(891),p=n(899),g=n(900),v=n(892),b=n(882),k=n(898),E=n(894),w=n(895),y=n(893),j=(n(451),n(409)),O=n.n(j),C=n(410),x=/[^A-Za-z _-]/g,S=/ /g,A=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!t.startsWith("https://magic.wizards.com")){e.next=5;break}return a={uri:"https://cors-anywhere.herokuapp.com/".concat(t),headers:{Origin:"https://feremiyjeenyus.github.io/mtgo-results-scraper/"},transform:function(e){return C.load(e)}},e.next=5,O()(a).then((function(e){var a=[];e(".deck-group").each((function(){var c=e(this).find("h4").text(),r=c.split(" (")[0],o=a.includes(r);a.push(r);var i=c.split(" ("),l=i[0],u="";i[1]&&(u=i[1].replace(x,"").replace(S,"_").toLowerCase());var s="".concat(t,"#").concat(l.replace(x,"").replace(S,"_").toLowerCase()).concat(u?"_"+u:""),h={maindeck:[],sideboard:[]};e(this).find(".sorted-by-overview-container").find(".row").each((function(){h.maindeck.push({name:e(this).find(".card-name").text().trim(),count:parseInt(e(this).find(".card-count").text(),10),highlighted:!1})})),e(this).find(".sorted-by-sideboard-container").find(".row").each((function(){h.sideboard.push({name:e(this).find(".card-name").text().trim(),count:parseInt(e(this).find(".card-count").text(),10),highlighted:!1})})),n.push({pilot:r,url:s,deck:h,duplicatePilot:o,archetype:""})}))})).catch((function(e){throw console.log(e),e}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),l=Object(m.a)(o,2),j=l[0],O=l[1],C=Object(a.useState)([]),x=Object(m.a)(C,2),S=x[0],_=x[1],I=Object(a.useState)([]),R=Object(m.a)(I,2),P=R[0],L=R[1],N=Object(a.useState)(),T=Object(m.a)(N,2),z=T[0],B=T[1],D=Object(a.useState)(),W=Object(m.a)(D,2),J=W[0],G=W[1],K=Object(a.useState)(!1),M=Object(m.a)(K,2),U=M[0],Z=M[1],$=Object(a.useState)(!1),q=Object(m.a)($,2),F=q[0],H=q[1];Object(a.useEffect)((function(){S&&!n&&(B(S[0]),G(0))}),[S,n]);var Q=function(e){var t=e.deck,n=e.archetype,a=e.pilot,c=e.duplicatePilot,r=e.url,o="[".concat(n||"archetype","](").concat(r,")"),i="**".concat(a.replace(/[_]/g,"\\_")).concat(c?" (duplicate pilot, link points to other list)":"","**"),l=[].concat(Object(h.a)(t.maindeck.filter((function(e){return e.highlighted}))),Object(h.a)(t.sideboard.filter((function(e){return e.highlighted})))).map((function(e){return e.name})),u="(".concat(Array.from(new Set(l)).join(", "),")");return"* ".concat(o,": ").concat(i," ").concat(l.length?u:"")},V=function(e){var t=[],n=!0,a=!1,c=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value,l=Q(i);t.push(l)}}catch(u){a=!0,c=u}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}L(t)},X=function(e){var t=[];e.forEach((function(e){e.deck.maindeck.forEach((function(e){var n=t.find((function(t){return t.card.name===e.name}));n?(n.card.count+=e.count,n.decks++):t.push({card:{name:e.name,count:e.count,highlighted:!1},decks:1})})),e.deck.sideboard.forEach((function(n){var a=t.find((function(e){return e.card.name===n.name}));a?(a.card.count+=n.count,e.deck.maindeck.find((function(e){return e.name===n.name}))||a.decks++):t.push({card:{name:n.name,count:n.count,highlighted:!1},decks:1})}))})),t.sort((function(e,t){return t.card.count-e.card.count}))},Y=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(j);case 3:t=e.sent,V(t),X(t),_(t),r(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),H(!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){var t=z.deck,n=!0,a=!1,c=void 0;try{for(var r,o=t.maindeck[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;l.name===e.name&&(l.highlighted=!l.highlighted)}}catch(p){a=!0,c=p}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}var u=!0,s=!1,h=void 0;try{for(var m,d=t.sideboard[Symbol.iterator]();!(u=(m=d.next()).done);u=!0){var f=m.value;f.name===e.name&&(f.highlighted=!f.highlighted)}}catch(p){s=!0,h=p}finally{try{u||null==d.return||d.return()}finally{if(s)throw h}}B(Object(i.a)({},z,{deck:t}))},te=z&&z.deck.maindeck.map((function(e){return c.a.createElement(d.a.Item,{key:e.name,onClick:function(){return ee(e)},className:e.highlighted?"highlight":""},e.count," ",e.name)})),ne=z&&z.deck.sideboard.map((function(e){return c.a.createElement(d.a.Item,{key:e.name,onClick:function(){return ee(e)},className:e.highlighted?"highlight":""},e.count," ",e.name)})),ae=function(){if(z){var e=J,t=Object(h.a)(S);t[e]=z,_(t);var n=P;n[e]=Q(z),L(n),e+2<S.length?(console.log(S[e]),B(S[e+1]),G(e+1)):Z(!1)}};return c.a.createElement(f.a,{className:"App"},c.a.createElement(p.a,null,"Scraper"),c.a.createElement(g.a,{columns:16},c.a.createElement(g.a.Row,null,c.a.createElement(g.a.Column,{width:3,textAlign:"left"},c.a.createElement(v.a,{value:j,onChange:function(e){return O(e.target.value)},placeholder:"Deck Dump URL"}),c.a.createElement("a",{href:"https://magic.wizards.com/en/content/deck-lists-magic-online-products-game-info",target:"_blank",style:{marginLeft:"1em"}},"MTGO Results")),c.a.createElement(g.a.Column,{width:2,textAlign:"left"},c.a.createElement(b.a,{onClick:Y,content:"Scrape"})),c.a.createElement(g.a.Column,{width:2,textAlign:"left"},c.a.createElement(b.a,{onClick:function(){return Z(!0)},content:"Start"}))),c.a.createElement(g.a.Row,null,c.a.createElement(g.a.Column,{width:16},F&&c.a.createElement(k.a,{negative:!0},c.a.createElement("p",null,"There was an error while attempting to scrape results. Please try again later")),c.a.createElement(E.a,null,c.a.createElement(E.a.TextArea,{value:null===P||void 0===P?void 0:P.join("\r\n"),style:{height:500}}))))),c.a.createElement(w.a,{open:U&&!!z,centered:!1,onClose:function(){return Z(!1)},closeOnDimmerClick:!1,closeIcon:!0},c.a.createElement(w.a.Content,null,z&&c.a.createElement(g.a,{width:16},c.a.createElement(g.a.Row,null,c.a.createElement(g.a.Column,{width:12},c.a.createElement(v.a,{label:"Archetype",value:z.archetype,onChange:function(e,t){var n=t.value,a=Object(i.a)({},z,{archetype:n});console.log(a),B(a)},onKeyPress:function(e,t){"Enter"===e.key&&ae()}})),c.a.createElement(g.a.Column,{width:2},c.a.createElement(b.a,{onClick:function(){if(z){var e=J,t=Object(h.a)(S);t[e]=z,_(t);var n=Object(h.a)(P);n[e]=Q(z),L(n),0!==e?(console.log(S[e-1]),B(S[e-1]),G(e-1)):Z(!1)}},content:"Previous"})),c.a.createElement(g.a.Column,{width:2},c.a.createElement(b.a,{onClick:ae,content:"Next"}))),c.a.createElement(g.a.Row,null,c.a.createElement(g.a.Column,{width:4},c.a.createElement(d.a,null,te)),c.a.createElement(g.a.Column,{width:4},c.a.createElement(d.a,null,ne)))),c.a.createElement(y.a,{value:J,total:S.length,progress:"ratio",style:{marginTop:"1em",marginBottom:0}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[443,1,2]]]);
//# sourceMappingURL=main.c1ce3832.chunk.js.map